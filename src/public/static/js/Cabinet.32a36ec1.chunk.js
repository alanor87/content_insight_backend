"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{889:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(184),c=function(){return(0,r.jsx)("div",{children:"Billing."})}},444:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(257),c=n(880),a=n(683),o=n(791),s=n(594),i=n(863),l=n(523),u="ProjectTile_projectTile__quj6f",d="ProjectTile_projectName__zn2aT",j="ProjectTile_projectURL__QeNpF",p=n(184),f=function(e){var t=e._id,n=e.projectName,r=e.projectCreationDate,a=e.projectURL,o=(0,c.$B)().url;return console.log("ProjectTile render"),(0,p.jsxs)(l.rU,{to:"".concat(o,"/").concat(t),children:[" ",(0,p.jsxs)("div",{className:u,children:[(0,p.jsx)("div",{className:d,children:n}),(0,p.jsxs)("div",{className:j,children:["URL: ",a]}),(0,p.jsxs)("div",{className:j,children:["Created: ",r]})]})]})},h=(0,o.memo)(f),x={projectTilesWrapper:"ProjectsList_projectTilesWrapper__BioBg"},v=(0,r.Pi)((function(){console.log("ProjectsList render");var e=(0,o.useRef)(null),t=i.Z.user,n=t.userProjects,r=t.createProject;return(0,p.jsxs)("div",{className:x.projectsContainer,children:[(0,p.jsx)(s.zx,{icon:"icon_plus",text:"Add project",onClick:function(){e.current.showModal()}}),(0,p.jsx)("div",{className:x.projectTilesWrapper,children:n.length?n.map((function(e){return(0,p.jsx)(h,(0,a.Z)({},e),e._id)})):"You dont have any projects yet."}),(0,p.jsx)("dialog",{ref:e,children:(0,p.jsx)(s.hK,{onCreateClick:function(e){r(e)},onCloseClick:function(){e.current.close()}})})]})})),m=n(982),g=n(165);function _(e,t,n,r,c,a,o){try{var s=e[a](o),i=s.value}catch(l){return void n(l)}s.done?t(i):Promise.resolve(i).then(r,c)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function o(e){_(a,r,c,o,s,"next",e)}function s(e){_(a,r,c,o,s,"throw",e)}o(void 0)}))}}var N=n(885),b="ProjectPage_projectPage__gPfMH",k="ProjectPage_headerWrapper__qmX26",w="ProjectPage_knowledgeBaseUploadForm__k82B2",y="ProjectPage_dragndropMessage__cuePI",Z="ProjectPage_filesList__qlSQN",C=(0,r.Pi)((function(){var e=(0,c.UO)().id,t=(0,o.useState)(),n=(0,N.Z)(t,2),r=n[0],u=n[1],d=(0,o.useState)(""),j=(0,N.Z)(d,2),f=j[0],h=j[1],x=(0,o.useState)(""),v=(0,N.Z)(x,2),_=v[0],C=v[1],L=(0,o.useState)(!1),U=(0,N.Z)(L,2),z=U[0],S=U[1],B=(0,o.useState)([]),R=(0,N.Z)(B,2),A=R[0],T=R[1],W=(0,o.useState)(""),E=(0,N.Z)(W,2),D=E[0],F=E[1],$=i.Z.user,I=$.getProjectById,M=$.saveProjectMetadata,q=$.ingestKnowledgeBase,K=i.Z.interface.pushNotification;(0,o.useEffect)((function(){var t=I(e);t&&(u(t),h(t.projectName),C(t.projectURL))}),[]);var O=function(e){return function(t){switch(e){case"projectName":h(t.target.value);break;case"projectURL":C(t.target.value)}}},Q=function(){var e=P((0,g.Z)().mark((function e(){var t;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f?_&&_.match(/^([A-Za-z0-9_]+\.)+[A-Za-z0-9_]+$/)||(F("projectURLError"),0):(F("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return F(""),t=(0,a.Z)((0,a.Z)({},r),{},{projectName:f,projectURL:_}),S(!0),e.next=7,M(t);case 7:S(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,n=(0,m.Z)(A),r=0;r<t.length;r+=1)console.log(t[r]),"text/plain"===t[r].type&&n.push(t[r]);T(n)}catch(D){K({type:"error",message:"Error while loading files from local drive. \n"+D.message})}},H=function(){var t=P((0,g.Z)().mark((function t(){var n;return(0,g.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.length){t.next=2;break}return t.abrupt("return");case 2:return S(!0),n=new FormData,A.forEach((function(e){n.append("dataFiles",e)})),n.append("projectId",e),t.next=8,q(n);case 8:S(!1);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.zx,{icon:"icon_arrow_left",children:(0,p.jsx)(l.rU,{to:"/cabinet/projects",children:"To projects list"})}),(0,p.jsxs)("div",{className:b,children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:k,children:[(0,p.jsx)("h2",{children:"Project metadata "}),(0,p.jsx)(s.zx,{disabled:z,text:"Save metadata",onClick:Q})]}),(0,p.jsxs)("label",{children:["Project name",(0,p.jsx)("input",{type:"text",className:"projectNameError"===D?"error":"",value:f,onChange:O("projectName")})]}),(0,p.jsxs)("label",{children:["Project URL for the widget usage",(0,p.jsx)("input",{type:"url",className:"projectURLError"===D?"error":"",value:_,onChange:O("projectURL")})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:k,children:[(0,p.jsx)("h2",{children:"Project knowledge base"}),(0,p.jsx)(s.zx,{disabled:z||!A.length,text:"Ingest knowledge base",onClick:H})]}),(0,p.jsxs)("label",{children:["List of knowledgebase files",(0,p.jsxs)("div",{className:w,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnd:G,children:[(0,p.jsx)("input",{type:"file",accept:".txt",multiple:!0,onChange:G}),null!==A&&void 0!==A&&A.length?(0,p.jsx)("ul",{className:Z,children:Array.from(A).map((function(e){var t=e.name,n=e.size;return(0,p.jsxs)("li",{children:[(0,p.jsx)("span",{children:t}),(0,p.jsx)("span",{children:n})]},t+n)}))}):(0,p.jsx)("div",{className:y,children:"Drag'n'drop txt files or click the area for dialog window."})]})]})]})]})]}):(0,p.jsx)("div",{children:"Project not found."})})),L="Projects_projects__BGRec",U=(0,r.Pi)((function(){var e=(0,c.$B)().url;return(0,p.jsxs)("div",{className:L,children:[" ",(0,p.jsxs)(c.rs,{children:[(0,p.jsx)(c.AW,{exact:!0,path:"".concat(e),component:v}),(0,p.jsx)(c.AW,{path:"".concat(e,"/:id"),component:C})]})]})}))},796:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(184),c=function(){return(0,r.jsx)("div",{children:"Settings."})}},346:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(184),c=function(){return(0,r.jsx)("div",{children:"Stats."})}},266:function(e,t,n){n.r(t),n.d(t,{Billing:function(){return h.default},Projects:function(){return f.default},Settings:function(){return x.default},Stats:function(){return v.default},default:function(){return p}});var r=n(791),c=n(880),a=n(594),o="Cabinet_cabinet__ohff-",s="Cabinet_cabinetPageContent__xyzny",i=n(184),l=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,444))})),u=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,889))})),d=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,796))})),j=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,346))})),p=function(){var e=(0,c.$B)().url;return(0,i.jsxs)("div",{className:o,children:[(0,i.jsx)(a.fv,{}),(0,i.jsx)("div",{className:s,children:(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(a.$j,{}),children:(0,i.jsxs)(c.rs,{children:[(0,i.jsx)(c.AW,{path:"".concat(e,"/projects"),component:l}),(0,i.jsx)(c.AW,{path:"".concat(e,"/stats"),component:j}),(0,i.jsx)(c.AW,{path:"".concat(e,"/billing"),component:u}),(0,i.jsx)(c.AW,{path:"".concat(e,"/settings"),component:d}),(0,i.jsx)(c.AW,{exact:!0,path:"".concat(e,"/*"),component:function(){return(0,i.jsx)(c.l_,{to:"".concat(e,"/projects")})}})]})})})]})},f=n(444),h=n(889),x=n(796),v=n(346)}}]);
//# sourceMappingURL=Cabinet.32a36ec1.chunk.js.map