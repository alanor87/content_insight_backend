"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{889:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var r=n(184),a=function(){return(0,r.jsx)("div",{children:"Billing."})}},444:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(257),a=n(880),s=n(683),c=n(165);function o(e,t,n,r,a,s,c){try{var o=e[s](c),i=o.value}catch(l){return void n(l)}o.done?t(i):Promise.resolve(i).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function c(e){o(s,r,a,c,i,"next",e)}function i(e){o(s,r,a,c,i,"throw",e)}c(void 0)}))}}var l=n(791),u=n(175),d=n(523),p=n(253),j="ProjectTile_projectTile__quj6f",f="ProjectTile_projectDetails__grJt9",h="ProjectTile_projectName__zn2aT",x="ProjectTile_projectURL__QeNpF",v="ProjectTile_projectControls__P+4YV",g=n(184),m=function(e){var t=e._id,n=e.projectName,r=e.projectCreationDate,s=e.projectURL,c=e.onDelete,o=(0,a.$B)().url;return(0,g.jsxs)("div",{className:j,children:[(0,g.jsxs)("div",{className:f,children:[" ",(0,g.jsxs)(d.rU,{to:"".concat(o,"/").concat(t),children:[(0,g.jsx)("div",{className:h,children:n}),(0,g.jsxs)("div",{className:x,children:["URL: ",s]}),(0,g.jsxs)("div",{className:x,children:["Created: ",r]})]})]}),(0,g.jsx)("div",{className:v,children:(0,g.jsx)(p.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){c(t)}})})]})},_=(0,l.memo)(m),P=n(863),w={projectTilesWrapper:"ProjectsList_projectTilesWrapper__BioBg"},N=(0,r.Pi)((function(){var e=(0,l.useRef)(null),t=P.Z.user,n=t.userProjects,r=t.createProject,a=t.deleteProject,o=function(){var e=i((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=i((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{className:w.projectsContainer,children:[(0,g.jsx)(u.zx,{icon:"icon_plus",text:"Add project",onClick:function(){e.current.showModal()}}),(0,g.jsx)("div",{className:w.projectTilesWrapper,children:n.length?n.map((function(e){return(0,g.jsx)(_,(0,s.Z)((0,s.Z)({},e),{},{onDelete:d}),e._id)})):"You dont have any projects yet."}),(0,g.jsx)("dialog",{ref:e,children:(0,g.jsx)(u.hK,{onCreateClick:o,onCloseClick:function(){e.current.close()}})})]})})),k=n(982),b=n(885),y="ProjectPage_projectPage__gPfMH",Z="ProjectPage_metadata__zFLMY",C="ProjectPage_knowledgeBase__pVuHl",D="ProjectPage_knowledgeBaseList__HxEv1",B="ProjectPage_knowledgeBaseUploadForm__k82B2",L="ProjectPage_headerWrapper__qmX26",U="ProjectPage_buttonsWrapper__uchQ+",z="ProjectPage_dragndropMessage__cuePI",S="ProjectPage_filesList__qlSQN",R=n(961),T=(0,r.Pi)((function(){var e=(0,a.UO)().id,t=(0,l.useState)(),n=(0,b.Z)(t,2),r=n[0],o=n[1],p=(0,l.useState)(""),j=(0,b.Z)(p,2),f=j[0],h=j[1],x=(0,l.useState)(!1),v=(0,b.Z)(x,2),m=v[0],_=v[1],w=(0,l.useState)([]),N=(0,b.Z)(w,2),T=N[0],W=N[1],A=(0,l.useState)(""),I=(0,b.Z)(A,2),E=I[0],F=I[1],M=(0,l.useState)(""),$=(0,b.Z)(M,2),q=$[0],H=$[1],K=P.Z.user,Q=K.getProjectById,Y=K.saveProjectMetadata,O=K.ingestKnowledgeBase,V=K.deleteKnowledgeBase,G=P.Z.interface.pushNotification,J=Q(e);(0,l.useEffect)((function(){J&&(o(J),h(J.projectURL))}),[J]);var X,ee=function(){var e=i((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,R.Z)(f)||(H("projectURLError"),0)){e.next=2;break}return e.abrupt("return");case 2:return H(""),t=(0,s.Z)((0,s.Z)({},r),{},{projectURL:f}),_(!0),F("Updating project metadata"),e.next=8,Y(t);case 8:_(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,n=(0,k.Z)(T),r=0;r<t.length;r+=1)"text/plain"===t[r].type&&n.push(t[r]);W(n)}catch(q){G({type:"error",message:"Error while loading files from local drive. \n"+q.message})}},ne=function(){var e=i((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),F("Ingesting knowledge base"),t=new FormData,T.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===r||void 0===r?void 0:r._id)||""),t.append("projectName",(null===r||void 0===r?void 0:r.projectName)||""),e.next=8,O(t);case 8:W([]),_(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=i((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),F("Deleting knowledge base"),e.next=4,V((null===r||void 0===r?void 0:r._id)||"",(null===r||void 0===r?void 0:r.projectName)||"");case 4:W([]),_(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r?(0,g.jsxs)("div",{children:[(0,g.jsx)(d.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,g.jsx)(u.zx,{icon:"icon_arrow_left",text:"To projects list"})}),(0,g.jsx)("h1",{children:r.projectName}),(0,g.jsxs)("div",{className:y,children:[(0,g.jsxs)("div",{className:Z,children:[(0,g.jsxs)("div",{className:L,children:[(0,g.jsx)("h2",{children:"Project metadata "}),(0,g.jsx)(u.zx,{disabled:m,text:"Save metadata",onClick:ee})]}),(0,g.jsxs)("label",{children:["Project URL for the widget usage",(0,g.jsx)("input",{type:"url",className:"projectURLError"===q?"error":"",placeholder:"https://example.com",value:f,onChange:(X="projectURL",function(e){"projectURL"===X&&h(e.target.value)})})]})]}),(0,g.jsxs)("div",{className:C,children:[(0,g.jsxs)("div",{className:L,children:[(0,g.jsx)("h2",{children:"Project knowledge base"}),(0,g.jsxs)("div",{className:U,children:[(0,g.jsx)(u.zx,{disabled:m||!T.length,text:"Ingest knowledge base",onClick:ne}),(0,g.jsx)(u.zx,{disabled:m||!r.projectIngestedData.length,text:"Delete knowledge base",onClick:re})]})]}),(0,g.jsxs)("details",{open:!!r.projectIngestedData.length,children:[(0,g.jsx)("summary",{children:"List of knowledgebase files"}),(0,g.jsx)("div",{className:D,children:(0,g.jsx)("ul",{className:S,children:r.projectIngestedData.map((function(e){var t=e.fileName,n=e.size;return(0,g.jsxs)("li",{children:[t,", ",n]},t)}))})})]}),(0,g.jsxs)("details",{open:!r.projectIngestedData.length,children:[(0,g.jsx)("summary",{children:"Ingest files"}),(0,g.jsxs)("div",{className:B,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[null!==T&&void 0!==T&&T.length?(0,g.jsx)("ul",{className:S,children:Array.from(T).map((function(e){var t=e.name,n=e.size;return(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{children:t}),(0,g.jsx)("span",{children:n})]},t+n)}))}):(0,g.jsx)("div",{className:z,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."}),(0,g.jsx)("input",{type:"file",accept:".txt",multiple:!0,onDragEnd:te,onChange:te})]})]})]}),m?(0,g.jsx)(u.$j,{text:E}):null]})]}):(0,g.jsx)("div",{children:"Project not found."})})),W="Projects_projects__BGRec",A=(0,r.Pi)((function(){var e=(0,a.$B)().url;return(0,g.jsxs)("div",{className:W,children:[" ",(0,g.jsxs)(a.rs,{children:[(0,g.jsx)(a.AW,{exact:!0,path:"".concat(e),component:N}),(0,g.jsx)(a.AW,{path:"".concat(e,"/:id"),component:T})]})]})}))},796:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var r=n(184),a=function(){return(0,r.jsx)("div",{children:"Settings."})}},346:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var r=n(184),a=function(){return(0,r.jsx)("div",{children:"Stats."})}},266:function(e,t,n){n.r(t),n.d(t,{Billing:function(){return h.default},Projects:function(){return f.default},Settings:function(){return x.default},Stats:function(){return v.default},default:function(){return j}});var r=n(791),a=n(880),s=n(175),c="Cabinet_cabinet__ohff-",o="Cabinet_cabinetPageContent__xyzny",i=n(184),l=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,444))})),u=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,889))})),d=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,796))})),p=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,346))})),j=function(){var e=(0,a.$B)().url;return(0,i.jsxs)("div",{className:c,children:[(0,i.jsx)(s.fv,{}),(0,i.jsx)("div",{className:o,children:(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(s.$j,{}),children:(0,i.jsxs)(a.rs,{children:[(0,i.jsx)(a.AW,{path:"".concat(e,"/projects"),component:l}),(0,i.jsx)(a.AW,{path:"".concat(e,"/stats"),component:p}),(0,i.jsx)(a.AW,{path:"".concat(e,"/billing"),component:u}),(0,i.jsx)(a.AW,{path:"".concat(e,"/settings"),component:d}),(0,i.jsx)(a.AW,{exact:!0,path:"".concat(e,"/*"),component:function(){return(0,i.jsx)(a.l_,{to:"".concat(e,"/projects")})}})]})})})]})},f=n(444),h=n(889),x=n(796),v=n(346)}}]);
//# sourceMappingURL=Cabinet.39ffdee0.chunk.js.map