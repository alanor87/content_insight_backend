"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{2889:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n=r(885),o=r(2791),a=r(7257),s=r(4880),i=r(3473),c=r(5764),l=r(1603),d=r(184),u=(0,i.J)("pk_test_51Nxd5pEafHQOYw4BGVCREVAXfGdqJ1waIwTd9TT9cWrP1dI8b9rkgaTV25WSRbVGzQFx9YcYDubV8WGF1Y0zNKYf00E2dA3E0t"),p=function(){var e=l.Z.user.createSubscription,t=(0,o.useState)(""),r=(0,n.Z)(t,2),a=r[0],s=r[1];(0,o.useEffect)((function(){e().then((function(e){return s(e)}))}),[]);var i={clientSecret:a};return(0,d.jsx)("div",{id:"checkout",children:a&&(0,d.jsx)(c.EmbeddedCheckoutProvider,{stripe:u,options:i,children:(0,d.jsx)(c.EmbeddedCheckout,{})})})},j=function(){var e=(0,o.useState)(),t=(0,n.Z)(e,2),r=t[0],a=t[1],i=l.Z.user.retrievePaymentSession,c=(0,s.TH)().search;return(0,o.useEffect)((function(){if(c){var e=new URLSearchParams(c).get("session_id");if(!e)return;i(e).then(a)}}),[c]),(0,d.jsx)("div",{children:JSON.stringify(r)})},g=(0,a.Pi)((function(){var e=(0,s.$B)().path;return(0,d.jsxs)(s.rs,{children:[(0,d.jsx)(s.AW,{exact:!0,path:e,component:p}),(0,d.jsx)(s.AW,{path:"".concat(e,"/checkoutResult"),component:j})]})}))},4326:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(7257),o=r(4880),a=r(8683),s=r(2942),i=r(2791),c=r(1523),l=r(5146),d="ProjectTile_projectTile__quj6f",u="ProjectTile_projectDetails__grJt9",p="ProjectTile_projectName__zn2aT",j="ProjectTile_projectURL__QeNpF",g="ProjectTile_projectControls__P+4YV",h=r(184),_=function(e){var t=e._id,r=e.projectName,n=e.projectCreationDate,a=e.projectURL,s=e.onDelete,i=(0,o.$B)().url;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsxs)("div",{className:u,children:[" ",(0,h.jsxs)(c.rU,{to:"".concat(i,"/").concat(t),children:[(0,h.jsx)("div",{className:p,children:r}),(0,h.jsxs)("div",{className:j,children:["URL: ",a]}),(0,h.jsxs)("div",{className:j,children:["Created: ",n]})]})]}),(0,h.jsx)("div",{className:g,children:(0,h.jsx)(l.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){s(t||"")}})})]})},x=(0,i.memo)(_),f=r(1603),v="ProjectsList_projectsContainer__q0Cj8",m="ProjectsList_addProjectButton__pAUz0",b="ProjectsList_projectTilesWrapper__BioBg",w=(0,n.Pi)((function(){var e=f.Z.user.userProjects,t=f.Z.interface,r=t.setModalType,n=t.setCurrentProjectId,o=t.isLoading,i=function(e){n(e),r("projectDelete")};return(0,h.jsxs)("div",{className:v,children:[(0,h.jsx)(s.zx,{icon:"icon_plus",text:"Add project",className:m,onClick:function(){r("projectCreate")}}),(0,h.jsx)("div",{className:b,children:e.length?e.map((function(e){return(0,h.jsx)(x,(0,a.Z)((0,a.Z)({},e),{},{onDelete:i}),e._id)})):"You dont have any projects yet."}),o?(0,h.jsx)(s.$j,{}):null]})})),P=r(2982),N=r(4165),k=r(5861),C=r(885),y="ProjectPage_projectPageWrapper__DfPKp",B="ProjectPage_projectPage__gPfMH",Z="ProjectPage_projectHeader__Npbm9",S="ProjectPage_projectPageSection__BaH67",W="ProjectPage_sectionHeader__8KMsL",D="ProjectPage_sectionContent__WjGjw",L="ProjectPage_widgetSettings__huTlX",R="ProjectPage_widgetControls__K+gdZ",T="ProjectPage_color__rsOVr",U="ProjectPage_range__ZyIDn",z="ProjectPage_demoWidgetWrapper__FsfhT",I="ProjectPage_knowledgeBase__pVuHl",H="ProjectPage_knowledgeBaseList__HxEv1",E="ProjectPage_knowledgeBaseUploadForm__k82B2",A="ProjectPage_filesList__qlSQN",F="ProjectPage_scriptCode__YCQon",M="ProjectPage_buttonsWrapper__uchQ+",q="ProjectPage_dragndropMessage__cuePI",V=r(4193),Y=r(8698),K={clarify_bot_chat_popup:"DemoWidget_clarify_bot_chat_popup__tr2iz",closed:"DemoWidget_closed__DloXd",clarify_bot_header:"DemoWidget_clarify_bot_header__AFB4+",clarify_bot_toggle_button:"DemoWidget_clarify_bot_toggle_button__3Uy9c",clarify_bot_content:"DemoWidget_clarify_bot_content__PjVly",clarify_bot_input_wrapper:"DemoWidget_clarify_bot_input_wrapper__qbBsJ",clarify_bot_ask_button:"DemoWidget_clarify_bot_ask_button__rTXgY"},$=r(1243),Q=function(e){var t=e.settings,r=t.projectId,n=t.widgetHeaderColor,o=t.widgetBackgroundColor,a=t.widgetBorderRadius,s=t.widgetBorderColor,c=t.widgetBorderWidth,l=f.Z.interface.pushNotification,d=f.Z.user._id,u=(0,i.useState)(""),p=(0,C.Z)(u,2),j=p[0],g=p[1],_=(0,i.useState)(""),x=(0,C.Z)(_,2),v=x[0],m=x[1],b=(0,i.useState)(!1),w=(0,C.Z)(b,2),P=w[0],y=w[1],B=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t,n;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,$.Z.post("/getCompletion",{userId:d,projectId:r,question:j});case 4:t=e.sent,n=t.data,m(n.response),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l({type:"error",message:"Error getting the responsse : \n"+e.t0.message});case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:K.clarify_bot_chat_popup,style:{backgroundColor:o,borderRadius:a+"px",borderColor:s,borderWidth:c+"px"},children:[(0,h.jsxs)("div",{className:K.clarify_bot_header,style:{backgroundColor:n},children:["Help",(0,h.jsx)("button",{className:K.clarify_bot_toggle_button,title:"open / close",children:"          _"})]}),(0,h.jsx)("div",{className:K.clarify_bot_content,children:P?(0,h.jsx)(Y.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:K.clarify_bot_input_wrapper,children:[(0,h.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:[(0,h.jsx)("circle",{cx:"6",cy:"6",r:"5.5",fill:"none",stroke:"black"}),(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M15 15l-5-5"})]}),(0,h.jsx)("input",{onChange:function(e){g(e.target.value)},value:j,className:K.clarify_bot_question_input,placeholder:"How can we help?"}),(0,h.jsx)("button",{className:K.clarify_bot_clear_button,onClick:function(){g(""),m("")},children:(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M3 13L13 3m0 10L3 3"})})})]}),v?(0,h.jsx)("div",{className:"clarify_bot_response_block",children:v}):(0,h.jsx)("button",{disabled:!j,title:"Send question request",className:K.clarify_bot_ask_button,onClick:B,children:"Ask!"})]})})]})},G=(0,n.Pi)((function(){var e,t,r=(0,o.UO)().id,n=(0,i.useState)(),l=(0,C.Z)(n,2),d=l[0],u=l[1],p=(0,i.useState)(""),j=(0,C.Z)(p,2),g=j[0],_=j[1],x=(0,i.useState)(""),v=(0,C.Z)(x,2),m=v[0],b=v[1],w=(0,i.useState)(""),Y=(0,C.Z)(w,2),K=Y[0],$=Y[1],G=(0,i.useState)(""),J=(0,C.Z)(G,2),O=J[0],X=J[1],ee=(0,i.useState)("0"),te=(0,C.Z)(ee,2),re=te[0],ne=te[1],oe=(0,i.useState)(""),ae=(0,C.Z)(oe,2),se=ae[0],ie=ae[1],ce=(0,i.useState)("0"),le=(0,C.Z)(ce,2),de=le[0],ue=le[1],pe=(0,i.useState)([]),je=(0,C.Z)(pe,2),ge=je[0],he=je[1],_e=(0,i.useState)(""),xe=(0,C.Z)(_e,2),fe=xe[0],ve=xe[1],me=f.Z.user,be=me._id,we=me.getProjectById,Pe=me.saveProjectSettings,Ne=me.ingestKnowledgeBase,ke=f.Z.interface,Ce=ke.isLoading,ye=ke.spinnerMessage,Be=ke.setSpinnerMessage,Ze=ke.pushNotification,Se=ke.setIsLoading,We=ke.setCurrentProjectId,De=ke.setModalType,Le=we(r);(0,i.useEffect)((function(){if(Le){var e=Le.projectName,t=Le.projectURL,r=Le.widgetSettings,n=r.widgetHeaderColor,o=r.widgetBackgroundColor,a=r.widgetBorderColor,s=r.widgetBorderWidth,i=r.widgetBorderRadius;u(Le),_(e||""),b(t||""),$(n||""),X(o||""),ie(a||""),ue(s||""),ne(i||"")}}),[Le]);var Re=function(){return'   <script\n    id="clarify_bot_widget"\n    data-userId="'.concat(be,'"\n    data-projectId="').concat(r,'"\n    src="https://content-insight-backend-c244a3d2147a.herokuapp.com/widget/getWidget"\n    data-backendURL="https://content-insight-backend-c244a3d2147a.herokuapp.com"\n   ><\/script>')},Te=function(e){return function(t){switch(e){case"projectName":_(t.target.value);break;case"projectURL":b(t.target.value);break;case"widgetHeaderColor":$(t.target.value);break;case"widgetBackgroundColor":X(t.target.value);break;case"widgetBorderColor":ie(t.target.value);break;case"widgetBorderWidth":ue(t.target.value);break;case"widgetBorderRadius":ne(t.target.value)}}},Ue=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,V.f)(g)?(0,V.r)(m)||(ve("projectURLError"),0):(ve("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return ve(""),t=(0,a.Z)((0,a.Z)({},d),{},{projectName:g,projectURL:m}),Se(!0),Be("Updating project metadata..."),e.next=8,Pe(t);case 8:Se(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se(!0),Be("Updating widget settings..."),t=(0,a.Z)((0,a.Z)({},d),{},{widgetSettings:{widgetHeaderColor:K,widgetBackgroundColor:O,widgetBorderRadius:re,widgetBorderColor:se,widgetBorderWidth:de}}),e.next=5,Pe(t);case 5:Se(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,r=(0,P.Z)(ge),n=0;n<t.length;n+=1)"text/plain"===t[n].type&&r.push(t[n]);he(r)}catch(fe){Ze({type:"error",message:"Error while loading files from local drive. \n"+fe.message})}},He=function(){var e=(0,k.Z)((0,N.Z)().mark((function e(){var t;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se(!0),Be("Ingesting knowledge base"),t=new FormData,ge.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===d||void 0===d?void 0:d._id)||""),t.append("projectName",(null===d||void 0===d?void 0:d.projectName)||""),e.next=8,Ne(t);case 8:he([]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d?(0,h.jsxs)("div",{className:y,children:[(0,h.jsxs)("div",{className:Z,children:[(0,h.jsxs)("h1",{children:["Project : ",d.projectName]})," ",(0,h.jsx)(c.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,h.jsx)(s.zx,{icon:"icon_arrow_left",text:"To projects list"})})]}),(0,h.jsxs)("div",{className:B,children:[(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:W,children:[(0,h.jsx)("h2",{children:"Widget settings"}),(0,h.jsx)(s.zx,{disabled:Ce,text:"Discard",icon:"icon_close",onClick:function(){if(d){var e=d.widgetSettings;$((null===e||void 0===e?void 0:e.widgetHeaderColor)||""),X((null===e||void 0===e?void 0:e.widgetBackgroundColor)||""),ie((null===e||void 0===e?void 0:e.widgetBorderColor)||""),ue((null===e||void 0===e?void 0:e.widgetBorderWidth)||""),ne((null===e||void 0===e?void 0:e.widgetBorderRadius)||"")}}}),(0,h.jsx)(s.zx,{disabled:Ce,text:"Save",icon:"icon_save",onClick:ze})]}),(0,h.jsxs)("div",{className:D+" "+L,children:[(0,h.jsxs)("div",{className:R,children:[" ",(0,h.jsxs)("label",{className:T,children:["Header color",(0,h.jsx)("input",{type:"color",value:K,onChange:Te("widgetHeaderColor")})]}),(0,h.jsxs)("label",{className:T,children:["Background color",(0,h.jsx)("input",{type:"color",value:O,onChange:Te("widgetBackgroundColor")})]}),(0,h.jsxs)("label",{className:T,children:["Border color",(0,h.jsx)("input",{type:"color",value:se,onChange:Te("widgetBorderColor")})]}),(0,h.jsxs)("label",{className:U,children:["Border width, px",(0,h.jsx)("input",{type:"range",min:0,max:6,value:de,onChange:Te("widgetBorderWidth")})]}),(0,h.jsxs)("label",{className:U,children:["Border radius, px",(0,h.jsx)("input",{type:"range",min:0,max:30,value:re,onChange:Te("widgetBorderRadius")})]})]}),(0,h.jsx)("div",{className:z,children:(0,h.jsx)(Q,{settings:{projectId:r,widgetHeaderColor:K,widgetBackgroundColor:O,widgetBorderRadius:re,widgetBorderColor:se,widgetBorderWidth:de}})})]})]}),(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:W,children:[(0,h.jsx)("h2",{children:"Knowledge base"}),(0,h.jsxs)("div",{className:M,children:[(0,h.jsx)(s.zx,{disabled:Ce||!ge.length,text:"Ingest",icon:"icon_edit",onClick:He}),(0,h.jsx)(s.zx,{disabled:Ce||!(null!==d&&void 0!==d&&null!==(e=d.projectIngestedData)&&void 0!==e&&e.length),text:"Delete",icon:"icon_delete",onClick:function(){We((null===d||void 0===d?void 0:d._id)||""),Be("Deleting knowledge base"),De("proejctKBDelete"),he([])}})]})]}),(0,h.jsxs)("div",{className:D+" "+I,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{children:"List of knowledgebase files"}),(0,h.jsx)("div",{className:H,children:(0,h.jsx)("ul",{className:A,children:null===d||void 0===d||null===(t=d.projectIngestedData)||void 0===t?void 0:t.map((function(e){var t=e.fileName,r=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsxs)("span",{children:[Number.parseFloat(r||"").toFixed(2)," kb"]})]},t)}))})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{children:"Ingest files"}),(0,h.jsxs)("div",{className:E,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[" ",(0,h.jsx)("input",{title:"files to upload",type:"file",accept:".txt",multiple:!0,onDragEnd:Ie,onChange:Ie}),null!==ge&&void 0!==ge&&ge.length?(0,h.jsx)("ul",{className:A,children:Array.from(ge).map((function(e){var t=e.name,r=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:r})]},t+r)}))}):(0,h.jsx)("div",{className:q,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."})]})]})]})]})," ",(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:W,children:[(0,h.jsx)("h2",{children:"Metadata"}),(0,h.jsx)(s.zx,{disabled:Ce,text:"Discard",icon:"icon_close",onClick:function(){_((null===d||void 0===d?void 0:d.projectName)||""),b((null===d||void 0===d?void 0:d.projectURL)||"")}}),(0,h.jsx)(s.zx,{disabled:Ce,text:"Save",icon:"icon_save",onClick:Ue})]}),(0,h.jsxs)("div",{className:D,children:[(0,h.jsxs)("label",{children:["Project name",(0,h.jsx)("span",{className:"hintText",children:"leters, numbers, dashes are allowed"}),(0,h.jsx)("input",{type:"text",className:"projectNameError"===fe?"error":"",placeholder:"project-name",value:g,onChange:Te("projectName")})]}),(0,h.jsxs)("label",{children:["Project URL for the widget usage",(0,h.jsx)("input",{type:"url",className:"projectURLError"===fe?"error":"",placeholder:"https://example.com",value:m,onChange:Te("projectURL")})]})]})]}),(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:W,children:[(0,h.jsx)("h2",{children:"Client script"}),(0,h.jsx)(s.zx,{disabled:Ce,text:"Copy",icon:"icon_copy",onClick:function(){window.navigator.clipboard.writeText(Re()).then((function(){return Ze({type:"info",message:"Script copied to clipboard."})}))}})]}),(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)("code",{className:F,children:Re()})," "]})]}),Ce?(0,h.jsx)(s.$j,{text:ye}):null]})]}):(0,h.jsx)("div",{children:"Project not found."})})),J={},O=(0,n.Pi)((function(){var e=(0,o.$B)().url;return(0,h.jsxs)("div",{className:J.projects,children:[" ",(0,h.jsxs)(o.rs,{children:[(0,h.jsx)(o.AW,{exact:!0,path:"".concat(e),component:w}),(0,h.jsx)(o.AW,{path:"".concat(e,"/:id"),component:G})]})]})}))},8796:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var n=r(184),o=function(){return(0,n.jsx)("div",{children:"Settings."})}},346:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var n=r(184),o=function(){return(0,n.jsx)("div",{children:"Stats."})}},6521:function(e,t,r){r.r(t),r.d(t,{Billing:function(){return j.default},Projects:function(){return p.default},Settings:function(){return g.default},Stats:function(){return h.default},default:function(){return u}});var n=r(2791),o=r(4880),a=r(2942),s=r(184),i=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,4326))})),c=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,2889))})),l=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,8796))})),d=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,346))})),u=function(){var e=(0,o.$B)().url,t=(0,o.TH)().pathname;return(0,s.jsx)("div",{className:"page",children:(0,s.jsx)("div",{className:"pageContent",children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(a.$j,{}),children:(0,s.jsxs)(o.rs,{children:[(0,s.jsx)(o.l_,{from:"/:url*(/+)",to:t.slice(0,-1)}),(0,s.jsx)(o.AW,{path:"".concat(e,"/projects"),component:i}),(0,s.jsx)(o.AW,{path:"".concat(e,"/stats"),component:d}),(0,s.jsx)(o.AW,{path:"".concat(e,"/billing"),component:c}),(0,s.jsx)(o.AW,{path:"".concat(e,"/settings"),component:l}),(0,s.jsx)(o.AW,{exact:!0,path:"".concat(e,"/"),component:function(){return(0,s.jsx)(o.l_,{to:"".concat(e,"/projects")})}})]})})})})},p=r(4326),j=r(2889),g=r(8796),h=r(346)}}]);
//# sourceMappingURL=Cabinet.4dc89132.chunk.js.map