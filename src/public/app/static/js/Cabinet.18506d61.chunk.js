"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{2889:function(e,t,r){r.r(t),r.d(t,{default:function(){return a}});var n=r(184),a=function(){return(0,n.jsx)("div",{children:"Billing."})}},4194:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(7257),a=r(4880),s=r(8683),o=r(7664),i=r(2791),c=r(1523),l=r(5146),d="ProjectTile_projectTile__quj6f",u="ProjectTile_projectDetails__grJt9",j="ProjectTile_projectName__zn2aT",p="ProjectTile_projectURL__QeNpF",g="ProjectTile_projectControls__P+4YV",h=r(184),x=function(e){var t=e._id,r=e.projectName,n=e.projectCreationDate,s=e.projectURL,o=e.onDelete,i=(0,a.$B)().url;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsxs)("div",{className:u,children:[" ",(0,h.jsxs)(c.rU,{to:"".concat(i,"/").concat(t),children:[(0,h.jsx)("div",{className:j,children:r}),(0,h.jsxs)("div",{className:p,children:["URL: ",s]}),(0,h.jsxs)("div",{className:p,children:["Created: ",n]})]})]}),(0,h.jsx)("div",{className:g,children:(0,h.jsx)(l.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){o(t||"")}})})]})},v=(0,i.memo)(x),m=r(7863),f="ProjectsList_projectsContainer__q0Cj8",_="ProjectsList_addProjectButton__pAUz0",w="ProjectsList_projectTilesWrapper__BioBg",P=(0,n.Pi)((function(){var e=m.Z.user.userProjects,t=m.Z.interface,r=t.setModalType,n=t.setCurrentProjectId,a=t.isLoading,i=function(e){n(e),r("projectDelete")};return(0,h.jsxs)("div",{className:f,children:[(0,h.jsx)(o.zx,{icon:"icon_plus",text:"Add project",className:_,onClick:function(){r("projectCreate")}}),(0,h.jsx)("div",{className:w,children:e.length?e.map((function(e){return(0,h.jsx)(v,(0,s.Z)((0,s.Z)({},e),{},{onDelete:i}),e._id)})):"You dont have any projects yet."}),a?(0,h.jsx)(o.$j,{}):null]})})),N=r(2982),C=r(4165),b=r(5861),k=r(885),B="ProjectPage_projectPageWrapper__DfPKp",y="ProjectPage_projectPage__gPfMH",Z="ProjectPage_projectHeader__Npbm9",L="ProjectPage_settings__O-GlV",S="ProjectPage_scriptCode__YCQon",U="ProjectPage_widgetStyleControls__-VlRI",R="ProjectPage_color__rsOVr",D="ProjectPage_range__ZyIDn",W="ProjectPage_knowledgeBase__pVuHl",z="ProjectPage_knowledgeBaseList__HxEv1",I="ProjectPage_knowledgeBaseUploadForm__k82B2",T="ProjectPage_projectPageSection__BaH67",H="ProjectPage_sectionHeader__8KMsL",A="ProjectPage_sectionContent__WjGjw",E="ProjectPage_buttonsWrapper__uchQ+",F="ProjectPage_dragndropMessage__cuePI",M="ProjectPage_filesList__qlSQN",$=r(4193),K=(0,n.Pi)((function(){var e,t,r,n,l=(0,a.UO)().id,d=(0,i.useState)(),u=(0,k.Z)(d,2),j=u[0],p=u[1],g=(0,i.useState)(""),x=(0,k.Z)(g,2),v=x[0],f=x[1],_=(0,i.useState)(""),w=(0,k.Z)(_,2),P=w[0],K=w[1],V=(0,i.useState)(""),O=(0,k.Z)(V,2),Q=O[0],q=O[1],Y=(0,i.useState)(""),G=(0,k.Z)(Y,2),J=G[0],X=G[1],ee=(0,i.useState)(""),te=(0,k.Z)(ee,2),re=te[0],ne=te[1],ae=(0,i.useState)("0"),se=(0,k.Z)(ae,2),oe=se[0],ie=se[1],ce=(0,i.useState)(""),le=(0,k.Z)(ce,2),de=le[0],ue=le[1],je=(0,i.useState)("0"),pe=(0,k.Z)(je,2),ge=pe[0],he=pe[1],xe=(0,i.useState)([]),ve=(0,k.Z)(xe,2),me=ve[0],fe=ve[1],_e=(0,i.useState)(""),we=(0,k.Z)(_e,2),Pe=we[0],Ne=we[1],Ce=(0,i.useState)(""),be=(0,k.Z)(Ce,2),ke=be[0],Be=be[1],ye=m.Z.user,Ze=ye._id,Le=ye.getProjectById,Se=ye.saveProjectSettings,Ue=ye.ingestKnowledgeBase,Re=m.Z.interface,De=Re.isLoading,We=Re.pushNotification,ze=Re.setIsLoading,Ie=Re.setCurrentProjectId,Te=Re.setModalType,He=Le(l);(0,i.useEffect)((function(){if(He){var e=He.projectName,t=He.projectURL,r=He.widgetSettings,n=r.widgetURL,a=r.widgetHeaderColor,s=r.widgetBackgroundColor,o=r.widgetBorderColor,i=r.widgetBorderWidth,c=r.widgetBorderRadius;p(He),f(e||""),K(t||""),q(n||""),X(a||""),ne(s||""),ue(o||""),he(i||""),ie(c||"")}}),[He]);var Ae=function(){return'   <script\n    id="content_insight_widget"\n    data-userId="'.concat(Ze,'"\n    data-projectId="').concat(l,'"\n    src="').concat(Q,'"\n    data-completionsURL="https://content-insight-backend-c244a3d2147a.herokuapp.com/api/v1/getCompletion"\n   ><\/script>')},Ee=function(e){return function(t){switch(console.log(t.target.value),e){case"projectName":f(t.target.value);break;case"projectURL":K(t.target.value);break;case"widgetURL":q(t.target.value);break;case"widgetHeaderColor":X(t.target.value);break;case"widgetBackgroundColor":ne(t.target.value);break;case"widgetBorderColor":ue(t.target.value);break;case"widgetBorderWidth":he(t.target.value);break;case"widgetBorderRadius":ie(t.target.value)}}},Fe=function(){var e=(0,b.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.f)(v)?(0,$.r)(P)?(0,$.r)(Q)||(Be("widgetURLError"),0):(Be("projectURLError"),0):(Be("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return Be(""),t=(0,s.Z)((0,s.Z)({},j),{},{projectName:v,projectURL:P}),ze(!0),Ne("Updating project metadata..."),e.next=8,Se(t);case 8:ze(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,b.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze(!0),Ne("Updating widget settings..."),t=(0,s.Z)((0,s.Z)({},j),{},{widgetSettings:{widgetURL:Q,widgetHeaderColor:J,widgetBackgroundColor:re,widgetBorderRadius:oe,widgetBorderColor:de,widgetBorderWidth:ge}}),e.next=5,Se(t);case 5:ze(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,r=(0,N.Z)(me),n=0;n<t.length;n+=1)"text/plain"===t[n].type&&r.push(t[n]);fe(r)}catch(ke){We({type:"error",message:"Error while loading files from local drive. \n"+ke.message})}},Ke=function(){var e=(0,b.Z)((0,C.Z)().mark((function e(){var t;return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze(!0),Ne("Ingesting knowledge base"),t=new FormData,me.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===j||void 0===j?void 0:j._id)||""),t.append("projectName",(null===j||void 0===j?void 0:j.projectName)||""),e.next=8,Ue(t);case 8:fe([]),ze(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?(0,h.jsxs)("div",{className:B,children:[(0,h.jsxs)("div",{className:Z,children:[(0,h.jsxs)("h1",{children:["Project : ",j.projectName]})," ",(0,h.jsx)(c.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,h.jsx)(o.zx,{icon:"icon_arrow_left",text:"To projects list"})})]}),(0,h.jsxs)("div",{className:y,children:[(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:T,children:[(0,h.jsxs)("div",{className:H,children:[(0,h.jsx)("h2",{children:"Client script"}),(0,h.jsx)(o.zx,{disabled:De,text:"Copy",icon:"icon_copy",onClick:function(){window.navigator.clipboard.writeText(Ae()).then((function(){return We({type:"info",message:"Script copied to clipboard."})}))}})]}),(0,h.jsxs)("div",{className:A,children:[(0,h.jsx)("code",{className:S,children:Ae()})," "]})]}),(0,h.jsxs)("div",{className:T,children:[(0,h.jsxs)("div",{className:H,children:[(0,h.jsx)("h2",{children:"Widget settings"}),(0,h.jsx)(o.zx,{disabled:De,text:"Discard",icon:"icon_close",onClick:function(){if(j){var e=j.widgetSettings;q((null===e||void 0===e?void 0:e.widgetURL)||""),X((null===e||void 0===e?void 0:e.widgetHeaderColor)||""),ne((null===e||void 0===e?void 0:e.widgetBackgroundColor)||""),ue((null===e||void 0===e?void 0:e.widgetBorderColor)||""),he((null===e||void 0===e?void 0:e.widgetBorderWidth)||""),ie((null===e||void 0===e?void 0:e.widgetBorderRadius)||"")}}}),(0,h.jsx)(o.zx,{disabled:De,text:"Save",icon:"icon_save",onClick:Me})]}),(0,h.jsxs)("div",{className:A,children:[(0,h.jsxs)("div",{className:U,children:[" ",(0,h.jsxs)("label",{className:R,children:["Header color",(0,h.jsx)("input",{type:"color",value:J,onChange:Ee("widgetHeaderColor")})]}),(0,h.jsxs)("label",{className:R,children:["Background color",(0,h.jsx)("input",{type:"color",value:re,onChange:Ee("widgetBackgroundColor")})]}),(0,h.jsxs)("label",{className:R,children:["Border color",(0,h.jsx)("input",{type:"color",value:de,onChange:Ee("widgetBorderColor")})]}),(0,h.jsxs)("label",{className:D,children:["Border width, px",(0,h.jsx)("input",{type:"range",min:0,max:6,value:ge,onChange:Ee("widgetBorderWidth")})]}),(0,h.jsxs)("label",{className:D,children:["Border radius, px",(0,h.jsx)("input",{type:"range",min:0,max:30,value:oe,onChange:Ee("widgetBorderRadius")})]})]}),(0,h.jsxs)("label",{className:R,children:["Widget source URL",(0,h.jsx)("input",{type:"url",className:"widgetURLError"===ke?"error":"",placeholder:"https://example.com",value:Q,onChange:Ee("widgetURL")})]})]})]}),(0,h.jsxs)("div",{className:T,children:[(0,h.jsxs)("div",{className:H,children:[(0,h.jsx)("h2",{children:"Metadata"}),(0,h.jsx)(o.zx,{disabled:De,text:"Discard",icon:"icon_close",onClick:function(){f((null===j||void 0===j?void 0:j.projectName)||""),K((null===j||void 0===j?void 0:j.projectURL)||"")}}),(0,h.jsx)(o.zx,{disabled:De,text:"Save",icon:"icon_save",onClick:Fe})]}),(0,h.jsxs)("div",{className:A,children:[(0,h.jsxs)("label",{children:["Project name",(0,h.jsx)("span",{className:"hintText",children:"leters, numbers, dashes are allowed"}),(0,h.jsx)("input",{type:"text",className:"projectNameError"===ke?"error":"",placeholder:"project-name",value:v,onChange:Ee("projectName")})]}),(0,h.jsxs)("label",{children:["Project URL for the widget usage",(0,h.jsx)("input",{type:"url",className:"projectURLError"===ke?"error":"",placeholder:"https://example.com",value:P,onChange:Ee("projectURL")})]})]})]})]}),(0,h.jsx)("div",{className:W,children:(0,h.jsxs)("div",{className:T,children:[(0,h.jsxs)("div",{className:H,children:[(0,h.jsx)("h2",{children:"Knowledge base"}),(0,h.jsxs)("div",{className:E,children:[(0,h.jsx)(o.zx,{disabled:De||!me.length,text:"Ingest",icon:"icon_edit",onClick:Ke}),(0,h.jsx)(o.zx,{disabled:De||!(null!==j&&void 0!==j&&null!==(e=j.projectIngestedData)&&void 0!==e&&e.length),text:"Delete",icon:"icon_delete",onClick:function(){Ie((null===j||void 0===j?void 0:j._id)||""),Ne("Deleting knowledge base"),Te("proejctKBDelete"),fe([])}})]})]}),(0,h.jsxs)("div",{className:A,children:[(0,h.jsxs)("details",{open:!(null===j||void 0===j||null===(t=j.projectIngestedData)||void 0===t||!t.length),children:[(0,h.jsx)("summary",{children:"List of knowledgebase files"}),(0,h.jsx)("div",{className:z,children:(0,h.jsx)("ul",{className:M,children:null===j||void 0===j||null===(r=j.projectIngestedData)||void 0===r?void 0:r.map((function(e){var t=e.fileName,r=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsxs)("span",{children:[Number.parseFloat(r||"").toFixed(2)," kb"]})]},t)}))})})]}),(0,h.jsxs)("details",{open:!(null!==j&&void 0!==j&&null!==(n=j.projectIngestedData)&&void 0!==n&&n.length),children:[(0,h.jsx)("summary",{children:"Ingest files"}),(0,h.jsxs)("div",{className:I,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[null!==me&&void 0!==me&&me.length?(0,h.jsx)("ul",{className:M,children:Array.from(me).map((function(e){var t=e.name,r=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:r})]},t+r)}))}):(0,h.jsx)("div",{className:F,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."}),(0,h.jsx)("input",{type:"file",accept:".txt",multiple:!0,onDragEnd:$e,onChange:$e})]})]})]})]})}),De?(0,h.jsx)(o.$j,{text:Pe}):null]})]}):(0,h.jsx)("div",{children:"Project not found."})})),V={},O=(0,n.Pi)((function(){var e=(0,a.$B)().url;return(0,h.jsxs)("div",{className:V.projects,children:[" ",(0,h.jsxs)(a.rs,{children:[(0,h.jsx)(a.AW,{exact:!0,path:"".concat(e),component:P}),(0,h.jsx)(a.AW,{path:"".concat(e,"/:id"),component:K})]})]})}))},8796:function(e,t,r){r.r(t),r.d(t,{default:function(){return a}});var n=r(184),a=function(){return(0,n.jsx)("div",{children:"Settings."})}},346:function(e,t,r){r.r(t),r.d(t,{default:function(){return a}});var n=r(184),a=function(){return(0,n.jsx)("div",{children:"Stats."})}},6521:function(e,t,r){r.r(t),r.d(t,{Billing:function(){return p.default},Projects:function(){return j.default},Settings:function(){return g.default},Stats:function(){return h.default},default:function(){return u}});var n=r(2791),a=r(4880),s=r(7664),o=r(184),i=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,4194))})),c=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,2889))})),l=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,8796))})),d=(0,n.lazy)((function(){return Promise.resolve().then(r.bind(r,346))})),u=function(){var e=(0,a.$B)().url,t=(0,a.TH)().pathname;return(0,o.jsx)("div",{className:"page",children:(0,o.jsx)("div",{className:"pageContent",children:(0,o.jsx)(n.Suspense,{fallback:(0,o.jsx)(s.$j,{}),children:(0,o.jsxs)(a.rs,{children:[(0,o.jsx)(a.l_,{from:"/:url*(/+)",to:t.slice(0,-1)}),(0,o.jsx)(a.AW,{path:"".concat(e,"/projects"),component:i}),(0,o.jsx)(a.AW,{path:"".concat(e,"/stats"),component:d}),(0,o.jsx)(a.AW,{path:"".concat(e,"/billing"),component:c}),(0,o.jsx)(a.AW,{path:"".concat(e,"/settings"),component:l}),(0,o.jsx)(a.AW,{exact:!0,path:"".concat(e,"/"),component:function(){return(0,o.jsx)(a.l_,{to:"".concat(e,"/projects")})}})]})})})})},j=r(4194),p=r(2889),g=r(8796),h=r(346)}}]);
//# sourceMappingURL=Cabinet.18506d61.chunk.js.map