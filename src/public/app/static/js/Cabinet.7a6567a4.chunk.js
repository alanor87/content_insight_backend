"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{2889:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Billing."})}},4194:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(7257),o=n(4880),s=n(8683),a=n(7664),i=n(2791),c=n(1523),l=n(5146),d="ProjectTile_projectTile__quj6f",u="ProjectTile_projectDetails__grJt9",p="ProjectTile_projectName__zn2aT",j="ProjectTile_projectURL__QeNpF",g="ProjectTile_projectControls__P+4YV",h=n(184),_=function(e){var t=e._id,n=e.projectName,r=e.projectCreationDate,s=e.projectURL,a=e.onDelete,i=(0,o.$B)().url;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsxs)("div",{className:u,children:[" ",(0,h.jsxs)(c.rU,{to:"".concat(i,"/").concat(t),children:[(0,h.jsx)("div",{className:p,children:n}),(0,h.jsxs)("div",{className:j,children:["URL: ",s]}),(0,h.jsxs)("div",{className:j,children:["Created: ",r]})]})]}),(0,h.jsx)("div",{className:g,children:(0,h.jsx)(l.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){a(t||"")}})})]})},x=(0,i.memo)(_),v=n(7863),m="ProjectsList_projectsContainer__q0Cj8",f="ProjectsList_addProjectButton__pAUz0",P="ProjectsList_projectTilesWrapper__BioBg",w=(0,r.Pi)((function(){var e=v.Z.user.userProjects,t=v.Z.interface,n=t.setModalType,r=t.setCurrentProjectId,o=t.isLoading,i=function(e){r(e),n("projectDelete")};return(0,h.jsxs)("div",{className:m,children:[(0,h.jsx)(a.zx,{icon:"icon_plus",text:"Add project",className:f,onClick:function(){n("projectCreate")}}),(0,h.jsx)("div",{className:P,children:e.length?e.map((function(e){return(0,h.jsx)(x,(0,s.Z)((0,s.Z)({},e),{},{onDelete:i}),e._id)})):"You dont have any projects yet."}),o?(0,h.jsx)(a.$j,{}):null]})})),N=n(2982),b=n(4165),C=n(5861),k=n(885),B={projectPageWrapper:"ProjectPage_projectPageWrapper__DfPKp",projectPage:"ProjectPage_projectPage__gPfMH",projectHeader:"ProjectPage_projectHeader__Npbm9",projectPageSection:"ProjectPage_projectPageSection__BaH67",sectionHeader:"ProjectPage_sectionHeader__8KMsL",sectionContent:"ProjectPage_sectionContent__WjGjw",settings:"ProjectPage_settings__O-GlV",scriptCode:"ProjectPage_scriptCode__YCQon",widgetStyleControls:"ProjectPage_widgetStyleControls__-VlRI",color:"ProjectPage_color__rsOVr",range:"ProjectPage_range__ZyIDn",knowledgeBaseList:"ProjectPage_knowledgeBaseList__HxEv1",knowledgeBaseUploadForm:"ProjectPage_knowledgeBaseUploadForm__k82B2",buttonsWrapper:"ProjectPage_buttonsWrapper__uchQ+",dragndropMessage:"ProjectPage_dragndropMessage__cuePI",filesList:"ProjectPage_filesList__qlSQN",content_insight_chat_popup:"ProjectPage_content_insight_chat_popup__l6sf7",closed:"ProjectPage_closed__oUp9c",content_insight_header:"ProjectPage_content_insight_header__1jpVr",content_insight_toggle_button:"ProjectPage_content_insight_toggle_button__oCczQ",content_insight_content:"ProjectPage_content_insight_content__eC9fJ",content_insight_input_wrapper:"ProjectPage_content_insight_input_wrapper__XCPeC"},y=n(4193),L=n(4164),S=(0,r.Pi)((function(){var e,t,n,r,l=(0,o.UO)().id,d=(0,i.useState)(),u=(0,k.Z)(d,2),p=u[0],j=u[1],g=(0,i.useState)(""),_=(0,k.Z)(g,2),x=_[0],m=_[1],f=(0,i.useState)(""),P=(0,k.Z)(f,2),w=P[0],S=P[1],Z=(0,i.useState)(""),U=(0,k.Z)(Z,2),R=U[0],D=U[1],W=(0,i.useState)(""),H=(0,k.Z)(W,2),z=H[0],I=H[1],T=(0,i.useState)(""),A=(0,k.Z)(T,2),E=A[0],F=A[1],M=(0,i.useState)("0"),q=(0,k.Z)(M,2),$=q[0],K=q[1],Q=(0,i.useState)(""),V=(0,k.Z)(Q,2),O=V[0],Y=V[1],G=(0,i.useState)("0"),J=(0,k.Z)(G,2),X=J[0],ee=J[1],te=(0,i.useState)([]),ne=(0,k.Z)(te,2),re=ne[0],oe=ne[1],se=(0,i.useState)(""),ae=(0,k.Z)(se,2),ie=ae[0],ce=ae[1],le=(0,i.useState)(""),de=(0,k.Z)(le,2),ue=de[0],pe=de[1],je=v.Z.user,ge=je._id,he=je.getProjectById,_e=je.saveProjectSettings,xe=je.ingestKnowledgeBase,ve=v.Z.interface,me=ve.isLoading,fe=ve.pushNotification,Pe=ve.setIsLoading,we=ve.setCurrentProjectId,Ne=ve.setModalType,be=he(l);(0,i.useEffect)((function(){if(be){var e=be.projectName,t=be.projectURL,n=be.widgetSettings,r=n.widgetURL,o=n.widgetHeaderColor,s=n.widgetBackgroundColor,a=n.widgetBorderColor,i=n.widgetBorderWidth,c=n.widgetBorderRadius;j(be),m(e||""),S(t||""),D(r||""),I(o||""),F(s||""),Y(a||""),ee(i||""),K(c||"")}}),[be]);var Ce=function(){return'   <script\n    id="content_insight_widget"\n    data-userId="'.concat(ge,'"\n    data-projectId="').concat(l,'"\n    src="').concat(R,'"\n    data-completionsURL="https://content-insight-backend-c244a3d2147a.herokuapp.com/api/v1/getCompletion"\n   ><\/script>')},ke=function(e){return function(t){switch(console.log(t.target.value),e){case"projectName":m(t.target.value);break;case"projectURL":S(t.target.value);break;case"widgetURL":D(t.target.value);break;case"widgetHeaderColor":I(t.target.value);break;case"widgetBackgroundColor":F(t.target.value);break;case"widgetBorderColor":Y(t.target.value);break;case"widgetBorderWidth":ee(t.target.value);break;case"widgetBorderRadius":K(t.target.value)}}},Be=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,y.f)(x)?(0,y.r)(w)?(0,y.r)(R)||(pe("widgetURLError"),0):(pe("projectURLError"),0):(pe("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return pe(""),t=(0,s.Z)((0,s.Z)({},p),{},{projectName:x,projectURL:w}),Pe(!0),ce("Updating project metadata..."),e.next=8,_e(t);case 8:Pe(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pe(!0),ce("Updating widget settings..."),t=(0,s.Z)((0,s.Z)({},p),{},{widgetSettings:{widgetURL:R,widgetHeaderColor:z,widgetBackgroundColor:E,widgetBorderRadius:$,widgetBorderColor:O,widgetBorderWidth:X}}),e.next=5,_e(t);case 5:Pe(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,n=(0,N.Z)(re),r=0;r<t.length;r+=1)"text/plain"===t[r].type&&n.push(t[r]);oe(n)}catch(ue){fe({type:"error",message:"Error while loading files from local drive. \n"+ue.message})}},Se=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pe(!0),ce("Ingesting knowledge base"),t=new FormData,re.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===p||void 0===p?void 0:p._id)||""),t.append("projectName",(null===p||void 0===p?void 0:p.projectName)||""),e.next=8,xe(t);case 8:oe([]),Pe(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p?(0,h.jsxs)("div",{className:B.projectPageWrapper,children:[(0,h.jsxs)("div",{className:B.projectHeader,children:[(0,h.jsxs)("h1",{children:["Project : ",p.projectName]})," ",(0,h.jsx)(c.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,h.jsx)(a.zx,{icon:"icon_arrow_left",text:"To projects list"})})]}),(0,h.jsxs)("div",{className:B.projectPage,children:[(0,h.jsxs)("div",{className:B.projectPageSection,children:[(0,h.jsxs)("div",{className:B.sectionHeader,children:[(0,h.jsx)("h2",{children:"Widget settings"}),(0,h.jsx)(a.zx,{disabled:me,text:"Discard",icon:"icon_close",onClick:function(){if(p){var e=p.widgetSettings;D((null===e||void 0===e?void 0:e.widgetURL)||""),I((null===e||void 0===e?void 0:e.widgetHeaderColor)||""),F((null===e||void 0===e?void 0:e.widgetBackgroundColor)||""),Y((null===e||void 0===e?void 0:e.widgetBorderColor)||""),ee((null===e||void 0===e?void 0:e.widgetBorderWidth)||""),K((null===e||void 0===e?void 0:e.widgetBorderRadius)||"")}}}),(0,h.jsx)(a.zx,{disabled:me,text:"Save",icon:"icon_save",onClick:ye})]}),(0,h.jsxs)("div",{className:B.sectionContent,children:[(0,h.jsxs)("div",{className:B.widgetStyleControls,children:[" ",(0,h.jsxs)("label",{className:B.color,children:["Header color",(0,h.jsx)("input",{type:"color",value:z,onChange:ke("widgetHeaderColor")})]}),(0,h.jsxs)("label",{className:B.color,children:["Background color",(0,h.jsx)("input",{type:"color",value:E,onChange:ke("widgetBackgroundColor")})]}),(0,h.jsxs)("label",{className:B.color,children:["Border color",(0,h.jsx)("input",{type:"color",value:O,onChange:ke("widgetBorderColor")})]}),(0,h.jsxs)("label",{className:B.range,children:["Border width, px",(0,h.jsx)("input",{type:"range",min:0,max:6,value:X,onChange:ke("widgetBorderWidth")})]}),(0,h.jsxs)("label",{className:B.range,children:["Border radius, px",(0,h.jsx)("input",{type:"range",min:0,max:30,value:$,onChange:ke("widgetBorderRadius")})]})]}),(0,h.jsxs)("label",{className:B.color,children:["Widget source URL",(0,h.jsx)("input",{type:"url",className:"widgetURLError"===ue?"error":"",placeholder:"https://example.com",value:R,onChange:ke("widgetURL")})]})]})]}),(0,h.jsxs)("div",{className:B.projectPageSection,children:[(0,h.jsxs)("div",{className:B.sectionHeader,children:[(0,h.jsx)("h2",{children:"Metadata"}),(0,h.jsx)(a.zx,{disabled:me,text:"Discard",icon:"icon_close",onClick:function(){m((null===p||void 0===p?void 0:p.projectName)||""),S((null===p||void 0===p?void 0:p.projectURL)||"")}}),(0,h.jsx)(a.zx,{disabled:me,text:"Save",icon:"icon_save",onClick:Be})]}),(0,h.jsxs)("div",{className:B.sectionContent,children:[(0,h.jsxs)("label",{children:["Project name",(0,h.jsx)("span",{className:"hintText",children:"leters, numbers, dashes are allowed"}),(0,h.jsx)("input",{type:"text",className:"projectNameError"===ue?"error":"",placeholder:"project-name",value:x,onChange:ke("projectName")})]}),(0,h.jsxs)("label",{children:["Project URL for the widget usage",(0,h.jsx)("input",{type:"url",className:"projectURLError"===ue?"error":"",placeholder:"https://example.com",value:w,onChange:ke("projectURL")})]})]})]}),(0,h.jsxs)("div",{className:B.projectPageSection,children:[(0,h.jsxs)("div",{className:B.sectionHeader,children:[(0,h.jsx)("h2",{children:"Knowledge base"}),(0,h.jsxs)("div",{className:B.buttonsWrapper,children:[(0,h.jsx)(a.zx,{disabled:me||!re.length,text:"Ingest",icon:"icon_edit",onClick:Se}),(0,h.jsx)(a.zx,{disabled:me||!(null!==p&&void 0!==p&&null!==(e=p.projectIngestedData)&&void 0!==e&&e.length),text:"Delete",icon:"icon_delete",onClick:function(){we((null===p||void 0===p?void 0:p._id)||""),ce("Deleting knowledge base"),Ne("proejctKBDelete"),oe([])}})]})]}),(0,h.jsxs)("div",{className:B.sectionContent,children:[(0,h.jsxs)("details",{open:!(null===p||void 0===p||null===(t=p.projectIngestedData)||void 0===t||!t.length),children:[(0,h.jsx)("summary",{children:"List of knowledgebase files"}),(0,h.jsx)("div",{className:B.knowledgeBaseList,children:(0,h.jsx)("ul",{className:B.filesList,children:null===p||void 0===p||null===(n=p.projectIngestedData)||void 0===n?void 0:n.map((function(e){var t=e.fileName,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsxs)("span",{children:[Number.parseFloat(n||"").toFixed(2)," kb"]})]},t)}))})})]}),(0,h.jsxs)("details",{open:!(null!==p&&void 0!==p&&null!==(r=p.projectIngestedData)&&void 0!==r&&r.length),children:[(0,h.jsx)("summary",{children:"Ingest files"}),(0,h.jsxs)("div",{className:B.knowledgeBaseUploadForm,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[null!==re&&void 0!==re&&re.length?(0,h.jsx)("ul",{className:B.filesList,children:Array.from(re).map((function(e){var t=e.name,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:n})]},t+n)}))}):(0,h.jsx)("div",{className:B.dragndropMessage,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."}),(0,h.jsx)("input",{type:"file",accept:".txt",multiple:!0,onDragEnd:Le,onChange:Le})]})]})]})]}),(0,h.jsxs)("div",{className:B.projectPageSection,children:[(0,h.jsxs)("div",{className:B.sectionHeader,children:[(0,h.jsx)("h2",{children:"Client script"}),(0,h.jsx)(a.zx,{disabled:me,text:"Copy",icon:"icon_copy",onClick:function(){window.navigator.clipboard.writeText(Ce()).then((function(){return fe({type:"info",message:"Script copied to clipboard."})}))}})]}),(0,h.jsxs)("div",{className:B.sectionContent,children:[(0,h.jsx)("code",{className:B.scriptCode,children:Ce()})," "]})]}),me?(0,h.jsx)(a.$j,{text:ie}):null]}),(0,L.createPortal)((0,h.jsxs)("div",{className:B.content_insight_chat_popup,children:[(0,h.jsxs)("div",{className:B.content_insight_header,children:["Help",(0,h.jsx)("button",{className:B.content_insight_toggle_button,title:"open / close",children:"            _"})]}),(0,h.jsxs)("div",{className:B.content_insight_content,children:[(0,h.jsxs)("div",{className:B.content_insight_input_wrapper,children:[(0,h.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:[(0,h.jsx)("circle",{cx:"6",cy:"6",r:"5.5",fill:"none",stroke:"black"}),(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M15 15l-5-5"})]}),(0,h.jsx)("input",{className:B.content_insight_question_input,placeholder:"How can we help?"}),(0,h.jsx)("button",{className:B.content_insight_clear_button,children:(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M3 13L13 3m0 10L3 3"})})})]}),(0,h.jsx)("button",{title:"Send question request",className:"content_insight_ask_button",children:"Ask!"}),(0,h.jsx)("div",{className:"content_insight_response_block"})]})]}),document.querySelector(".portal")||document.body)]}):(0,h.jsx)("div",{children:"Project not found."})})),Z={},U=(0,r.Pi)((function(){var e=(0,o.$B)().url;return(0,h.jsxs)("div",{className:Z.projects,children:[" ",(0,h.jsxs)(o.rs,{children:[(0,h.jsx)(o.AW,{exact:!0,path:"".concat(e),component:w}),(0,h.jsx)(o.AW,{path:"".concat(e,"/:id"),component:S})]})]})}))},8796:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Settings."})}},346:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Stats."})}},6521:function(e,t,n){n.r(t),n.d(t,{Billing:function(){return j.default},Projects:function(){return p.default},Settings:function(){return g.default},Stats:function(){return h.default},default:function(){return u}});var r=n(2791),o=n(4880),s=n(7664),a=n(184),i=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,4194))})),c=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,2889))})),l=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,8796))})),d=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,346))})),u=function(){var e=(0,o.$B)().url,t=(0,o.TH)().pathname;return(0,a.jsx)("div",{className:"page",children:(0,a.jsx)("div",{className:"pageContent",children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(s.$j,{}),children:(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.l_,{from:"/:url*(/+)",to:t.slice(0,-1)}),(0,a.jsx)(o.AW,{path:"".concat(e,"/projects"),component:i}),(0,a.jsx)(o.AW,{path:"".concat(e,"/stats"),component:d}),(0,a.jsx)(o.AW,{path:"".concat(e,"/billing"),component:c}),(0,a.jsx)(o.AW,{path:"".concat(e,"/settings"),component:l}),(0,a.jsx)(o.AW,{exact:!0,path:"".concat(e,"/"),component:function(){return(0,a.jsx)(o.l_,{to:"".concat(e,"/projects")})}})]})})})})},p=n(4194),j=n(2889),g=n(8796),h=n(346)}}]);
//# sourceMappingURL=Cabinet.7a6567a4.chunk.js.map