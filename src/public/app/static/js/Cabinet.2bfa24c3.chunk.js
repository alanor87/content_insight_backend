"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{2889:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Billing."})}},4326:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(7257),o=n(4880),i=n(8683),s=n(7664),a=n(2791),c=n(1523),l=n(5146),d="ProjectTile_projectTile__quj6f",u="ProjectTile_projectDetails__grJt9",g="ProjectTile_projectName__zn2aT",p="ProjectTile_projectURL__QeNpF",j="ProjectTile_projectControls__P+4YV",h=n(184),_=function(e){var t=e._id,n=e.projectName,r=e.projectCreationDate,i=e.projectURL,s=e.onDelete,a=(0,o.$B)().url;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsxs)("div",{className:u,children:[" ",(0,h.jsxs)(c.rU,{to:"".concat(a,"/").concat(t),children:[(0,h.jsx)("div",{className:g,children:n}),(0,h.jsxs)("div",{className:p,children:["URL: ",i]}),(0,h.jsxs)("div",{className:p,children:["Created: ",r]})]})]}),(0,h.jsx)("div",{className:j,children:(0,h.jsx)(l.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){s(t||"")}})})]})},x=(0,a.memo)(_),v=n(7863),m="ProjectsList_projectsContainer__q0Cj8",f="ProjectsList_addProjectButton__pAUz0",w="ProjectsList_projectTilesWrapper__BioBg",N=(0,r.Pi)((function(){var e=v.Z.user.userProjects,t=v.Z.interface,n=t.setModalType,r=t.setCurrentProjectId,o=t.isLoading,a=function(e){r(e),n("projectDelete")};return(0,h.jsxs)("div",{className:m,children:[(0,h.jsx)(s.zx,{icon:"icon_plus",text:"Add project",className:f,onClick:function(){n("projectCreate")}}),(0,h.jsx)("div",{className:w,children:e.length?e.map((function(e){return(0,h.jsx)(x,(0,i.Z)((0,i.Z)({},e),{},{onDelete:a}),e._id)})):"You dont have any projects yet."}),o?(0,h.jsx)(s.$j,{}):null]})})),P=n(2982),b=n(4165),k=n(5861),C=n(885),B="ProjectPage_projectPageWrapper__DfPKp",y="ProjectPage_projectPage__gPfMH",Z="ProjectPage_projectHeader__Npbm9",L="ProjectPage_projectPageSection__BaH67",D="ProjectPage_sectionHeader__8KMsL",W="ProjectPage_sectionContent__WjGjw",R="ProjectPage_widgetSettings__huTlX",U="ProjectPage_widgetControls__K+gdZ",S="ProjectPage_color__rsOVr",z="ProjectPage_sourceURL__7Ep6N",H="ProjectPage_range__ZyIDn",T="ProjectPage_demoWidgetWrapper__FsfhT",I="ProjectPage_knowledgeBase__pVuHl",A="ProjectPage_knowledgeBaseList__HxEv1",E="ProjectPage_knowledgeBaseUploadForm__k82B2",F="ProjectPage_scriptCode__YCQon",M="ProjectPage_buttonsWrapper__uchQ+",K="ProjectPage_dragndropMessage__cuePI",q="ProjectPage_filesList__qlSQN",$=n(4193),Q={content_insight_chat_popup:"DemoWidget_content_insight_chat_popup__-G5DE",closed:"DemoWidget_closed__DloXd",content_insight_header:"DemoWidget_content_insight_header__a05No",content_insight_toggle_button:"DemoWidget_content_insight_toggle_button__5lj62",content_insight_content:"DemoWidget_content_insight_content__3U7gs",content_insight_input_wrapper:"DemoWidget_content_insight_input_wrapper__DZ-IK",content_insight_ask_button:"DemoWidget_content_insight_ask_button__rAh74"},O=function(e){var t=e.settings,n=t.widgetHeaderColor,r=t.widgetBackgroundColor,o=t.widgetBorderRadius,i=t.widgetBorderColor,s=t.widgetBorderWidth;return(0,h.jsxs)("div",{className:Q.content_insight_chat_popup,style:{backgroundColor:r,borderRadius:o+"px",borderColor:i,borderWidth:s+"px"},children:[(0,h.jsxs)("div",{className:Q.content_insight_header,style:{backgroundColor:n},children:["Help",(0,h.jsx)("button",{className:Q.content_insight_toggle_button,title:"open / close",children:"          _"})]}),(0,h.jsxs)("div",{className:Q.content_insight_content,children:[(0,h.jsxs)("div",{className:Q.content_insight_input_wrapper,children:[(0,h.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:[(0,h.jsx)("circle",{cx:"6",cy:"6",r:"5.5",fill:"none",stroke:"black"}),(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M15 15l-5-5"})]}),(0,h.jsx)("input",{className:Q.content_insight_question_input,placeholder:"How can we help?"}),(0,h.jsx)("button",{className:Q.content_insight_clear_button,children:(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",focusable:"false",children:(0,h.jsx)("path",{stroke:"black",strokeLinecap:"round",d:"M3 13L13 3m0 10L3 3"})})})]}),(0,h.jsx)("button",{title:"Send question request",className:Q.content_insight_ask_button,children:"Ask!"}),(0,h.jsx)("div",{className:"content_insight_response_block"})]})]})},V=(0,r.Pi)((function(){var e,t,n=(0,o.UO)().id,r=(0,a.useState)(),l=(0,C.Z)(r,2),d=l[0],u=l[1],g=(0,a.useState)(""),p=(0,C.Z)(g,2),j=p[0],_=p[1],x=(0,a.useState)(""),m=(0,C.Z)(x,2),f=m[0],w=m[1],N=(0,a.useState)(""),Q=(0,C.Z)(N,2),V=Q[0],Y=Q[1],G=(0,a.useState)(""),X=(0,C.Z)(G,2),J=X[0],ee=X[1],te=(0,a.useState)(""),ne=(0,C.Z)(te,2),re=ne[0],oe=ne[1],ie=(0,a.useState)("0"),se=(0,C.Z)(ie,2),ae=se[0],ce=se[1],le=(0,a.useState)(""),de=(0,C.Z)(le,2),ue=de[0],ge=de[1],pe=(0,a.useState)("0"),je=(0,C.Z)(pe,2),he=je[0],_e=je[1],xe=(0,a.useState)([]),ve=(0,C.Z)(xe,2),me=ve[0],fe=ve[1],we=(0,a.useState)(""),Ne=(0,C.Z)(we,2),Pe=Ne[0],be=Ne[1],ke=(0,a.useState)(""),Ce=(0,C.Z)(ke,2),Be=Ce[0],ye=Ce[1],Ze=v.Z.user,Le=Ze._id,De=Ze.getProjectById,We=Ze.saveProjectSettings,Re=Ze.ingestKnowledgeBase,Ue=v.Z.interface,Se=Ue.isLoading,ze=Ue.pushNotification,He=Ue.setIsLoading,Te=Ue.setCurrentProjectId,Ie=Ue.setModalType,Ae=De(n);(0,a.useEffect)((function(){if(Ae){var e=Ae.projectName,t=Ae.projectURL,n=Ae.widgetSettings,r=n.widgetURL,o=n.widgetHeaderColor,i=n.widgetBackgroundColor,s=n.widgetBorderColor,a=n.widgetBorderWidth,c=n.widgetBorderRadius;u(Ae),_(e||""),w(t||""),Y(r||""),ee(o||""),oe(i||""),ge(s||""),_e(a||""),ce(c||"")}}),[Ae]);var Ee=function(){return'   <script\n    id="content_insight_widget"\n    data-userId="'.concat(Le,'"\n    data-projectId="').concat(n,'"\n    src="').concat(V,'"\n    data-completionsURL="/api/v1/getCompletion"\n   ><\/script>')},Fe=function(e){return function(t){switch(console.log(t.target.value),e){case"projectName":_(t.target.value);break;case"projectURL":w(t.target.value);break;case"widgetURL":Y(t.target.value);break;case"widgetHeaderColor":ee(t.target.value);break;case"widgetBackgroundColor":oe(t.target.value);break;case"widgetBorderColor":ge(t.target.value);break;case"widgetBorderWidth":_e(t.target.value);break;case"widgetBorderRadius":ce(t.target.value)}}},Me=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,$.f)(j)?(0,$.r)(f)?(0,$.r)(V)||(ye("widgetURLError"),0):(ye("projectURLError"),0):(ye("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return ye(""),t=(0,i.Z)((0,i.Z)({},d),{},{projectName:j,projectURL:f}),He(!0),be("Updating project metadata..."),e.next=8,We(t);case 8:He(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He(!0),be("Updating widget settings..."),t=(0,i.Z)((0,i.Z)({},d),{},{widgetSettings:{widgetURL:V,widgetHeaderColor:J,widgetBackgroundColor:re,widgetBorderRadius:ae,widgetBorderColor:ue,widgetBorderWidth:he}}),e.next=5,We(t);case 5:He(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,n=(0,P.Z)(me),r=0;r<t.length;r+=1)"text/plain"===t[r].type&&n.push(t[r]);fe(n)}catch(Be){ze({type:"error",message:"Error while loading files from local drive. \n"+Be.message})}},$e=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He(!0),be("Ingesting knowledge base"),t=new FormData,me.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===d||void 0===d?void 0:d._id)||""),t.append("projectName",(null===d||void 0===d?void 0:d.projectName)||""),e.next=8,Re(t);case 8:fe([]),He(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d?(0,h.jsxs)("div",{className:B,children:[(0,h.jsxs)("div",{className:Z,children:[(0,h.jsxs)("h1",{children:["Project : ",d.projectName]})," ",(0,h.jsx)(c.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,h.jsx)(s.zx,{icon:"icon_arrow_left",text:"To projects list"})})]}),(0,h.jsxs)("div",{className:y,children:[(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)("h2",{children:"Widget settings"}),(0,h.jsx)(s.zx,{disabled:Se,text:"Discard",icon:"icon_close",onClick:function(){if(d){var e=d.widgetSettings;Y((null===e||void 0===e?void 0:e.widgetURL)||""),ee((null===e||void 0===e?void 0:e.widgetHeaderColor)||""),oe((null===e||void 0===e?void 0:e.widgetBackgroundColor)||""),ge((null===e||void 0===e?void 0:e.widgetBorderColor)||""),_e((null===e||void 0===e?void 0:e.widgetBorderWidth)||""),ce((null===e||void 0===e?void 0:e.widgetBorderRadius)||"")}}}),(0,h.jsx)(s.zx,{disabled:Se,text:"Save",icon:"icon_save",onClick:Ke})]}),(0,h.jsxs)("div",{className:W+" "+R,children:[(0,h.jsxs)("div",{className:U,children:[" ",(0,h.jsxs)("label",{className:S,children:["Header color",(0,h.jsx)("input",{type:"color",value:J,onChange:Fe("widgetHeaderColor")})]}),(0,h.jsxs)("label",{className:S,children:["Background color",(0,h.jsx)("input",{type:"color",value:re,onChange:Fe("widgetBackgroundColor")})]}),(0,h.jsxs)("label",{className:S,children:["Border color",(0,h.jsx)("input",{type:"color",value:ue,onChange:Fe("widgetBorderColor")})]}),(0,h.jsxs)("label",{className:H,children:["Border width, px",(0,h.jsx)("input",{type:"range",min:0,max:6,value:he,onChange:Fe("widgetBorderWidth")})]}),(0,h.jsxs)("label",{className:H,children:["Border radius, px",(0,h.jsx)("input",{type:"range",min:0,max:30,value:ae,onChange:Fe("widgetBorderRadius")})]}),(0,h.jsxs)("label",{className:z,children:["Widget source URL",(0,h.jsx)("input",{type:"url",className:"widgetURLError"===Be?"error":"",placeholder:"https://example.com",value:V,onChange:Fe("widgetURL")})]})]}),(0,h.jsx)("div",{className:T,children:(0,h.jsx)(O,{settings:{widgetHeaderColor:J,widgetBackgroundColor:re,widgetBorderRadius:ae,widgetBorderColor:ue,widgetBorderWidth:he}})})]})]}),(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)("h2",{children:"Knowledge base"}),(0,h.jsxs)("div",{className:M,children:[(0,h.jsx)(s.zx,{disabled:Se||!me.length,text:"Ingest",icon:"icon_edit",onClick:$e}),(0,h.jsx)(s.zx,{disabled:Se||!(null!==d&&void 0!==d&&null!==(e=d.projectIngestedData)&&void 0!==e&&e.length),text:"Delete",icon:"icon_delete",onClick:function(){Te((null===d||void 0===d?void 0:d._id)||""),be("Deleting knowledge base"),Ie("proejctKBDelete"),fe([])}})]})]}),(0,h.jsxs)("div",{className:W+" "+I,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{children:"List of knowledgebase files"}),(0,h.jsx)("div",{className:A,children:(0,h.jsx)("ul",{className:q,children:null===d||void 0===d||null===(t=d.projectIngestedData)||void 0===t?void 0:t.map((function(e){var t=e.fileName,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsxs)("span",{children:[Number.parseFloat(n||"").toFixed(2)," kb"]})]},t)}))})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{children:"Ingest files"}),(0,h.jsxs)("div",{className:E,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[null!==me&&void 0!==me&&me.length?(0,h.jsx)("ul",{className:q,children:Array.from(me).map((function(e){var t=e.name,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:n})]},t+n)}))}):(0,h.jsx)("div",{className:K,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."}),(0,h.jsx)("input",{type:"file",accept:".txt",multiple:!0,onDragEnd:qe,onChange:qe})]})]})]})]})," ",(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)("h2",{children:"Metadata"}),(0,h.jsx)(s.zx,{disabled:Se,text:"Discard",icon:"icon_close",onClick:function(){_((null===d||void 0===d?void 0:d.projectName)||""),w((null===d||void 0===d?void 0:d.projectURL)||"")}}),(0,h.jsx)(s.zx,{disabled:Se,text:"Save",icon:"icon_save",onClick:Me})]}),(0,h.jsxs)("div",{className:W,children:[(0,h.jsxs)("label",{children:["Project name",(0,h.jsx)("span",{className:"hintText",children:"leters, numbers, dashes are allowed"}),(0,h.jsx)("input",{type:"text",className:"projectNameError"===Be?"error":"",placeholder:"project-name",value:j,onChange:Fe("projectName")})]}),(0,h.jsxs)("label",{children:["Project URL for the widget usage",(0,h.jsx)("input",{type:"url",className:"projectURLError"===Be?"error":"",placeholder:"https://example.com",value:f,onChange:Fe("projectURL")})]})]})]}),(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)("h2",{children:"Client script"}),(0,h.jsx)(s.zx,{disabled:Se,text:"Copy",icon:"icon_copy",onClick:function(){window.navigator.clipboard.writeText(Ee()).then((function(){return ze({type:"info",message:"Script copied to clipboard."})}))}})]}),(0,h.jsxs)("div",{className:W,children:[(0,h.jsx)("code",{className:F,children:Ee()})," "]})]}),Se?(0,h.jsx)(s.$j,{text:Pe}):null]})]}):(0,h.jsx)("div",{children:"Project not found."})})),Y={},G=(0,r.Pi)((function(){var e=(0,o.$B)().url;return(0,h.jsxs)("div",{className:Y.projects,children:[" ",(0,h.jsxs)(o.rs,{children:[(0,h.jsx)(o.AW,{exact:!0,path:"".concat(e),component:N}),(0,h.jsx)(o.AW,{path:"".concat(e,"/:id"),component:V})]})]})}))},8796:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Settings."})}},346:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(184),o=function(){return(0,r.jsx)("div",{children:"Stats."})}},6521:function(e,t,n){n.r(t),n.d(t,{Billing:function(){return p.default},Projects:function(){return g.default},Settings:function(){return j.default},Stats:function(){return h.default},default:function(){return u}});var r=n(2791),o=n(4880),i=n(7664),s=n(184),a=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,4326))})),c=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,2889))})),l=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,8796))})),d=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,346))})),u=function(){var e=(0,o.$B)().url,t=(0,o.TH)().pathname;return(0,s.jsx)("div",{className:"page",children:(0,s.jsx)("div",{className:"pageContent",children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.$j,{}),children:(0,s.jsxs)(o.rs,{children:[(0,s.jsx)(o.l_,{from:"/:url*(/+)",to:t.slice(0,-1)}),(0,s.jsx)(o.AW,{path:"".concat(e,"/projects"),component:a}),(0,s.jsx)(o.AW,{path:"".concat(e,"/stats"),component:d}),(0,s.jsx)(o.AW,{path:"".concat(e,"/billing"),component:c}),(0,s.jsx)(o.AW,{path:"".concat(e,"/settings"),component:l}),(0,s.jsx)(o.AW,{exact:!0,path:"".concat(e,"/"),component:function(){return(0,s.jsx)(o.l_,{to:"".concat(e,"/projects")})}})]})})})})},g=n(4326),p=n(2889),j=n(8796),h=n(346)}}]);
//# sourceMappingURL=Cabinet.2bfa24c3.chunk.js.map