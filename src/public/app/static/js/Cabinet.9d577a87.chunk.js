"use strict";(self.webpackChunkcontent_insight_frontend=self.webpackChunkcontent_insight_frontend||[]).push([[595],{2889:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(184),s=function(){return(0,r.jsx)("div",{children:"Billing."})}},4194:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(7257),s=n(4880),a=n(8683),c=n(7823),i=n(2791),o=n(1523),l=n(5146),d="ProjectTile_projectTile__quj6f",u="ProjectTile_projectDetails__grJt9",j="ProjectTile_projectName__zn2aT",p="ProjectTile_projectURL__QeNpF",x="ProjectTile_projectControls__P+4YV",h=n(184),g=function(e){var t=e._id,n=e.projectName,r=e.projectCreationDate,a=e.projectURL,c=e.onDelete,i=(0,s.$B)().url;return(0,h.jsxs)("div",{className:d,children:[(0,h.jsxs)("div",{className:u,children:[" ",(0,h.jsxs)(o.rU,{to:"".concat(i,"/").concat(t),children:[(0,h.jsx)("div",{className:j,children:n}),(0,h.jsxs)("div",{className:p,children:["URL: ",a]}),(0,h.jsxs)("div",{className:p,children:["Created: ",r]})]})]}),(0,h.jsx)("div",{className:x,children:(0,h.jsx)(l.Z,{icon:"icon_delete",text:"Delete project",onClick:function(){c(t)}})})]})},f=(0,i.memo)(g),v=n(7863),m="ProjectsList_projectsContainer__q0Cj8",_="ProjectsList_addProjectButton__pAUz0",P="ProjectsList_projectTilesWrapper__BioBg",N=(0,r.Pi)((function(){var e=v.Z.user.userProjects,t=v.Z.interface,n=t.setModalType,r=t.setCurrentProjectId,s=t.isLoading,i=function(e){r(e),n("projectDelete")};return(0,h.jsxs)("div",{className:m,children:[(0,h.jsx)(c.zx,{icon:"icon_plus",text:"Add project",className:_,onClick:function(){n("projectCreate")}}),(0,h.jsx)("div",{className:P,children:e.length?e.map((function(e){return(0,h.jsx)(f,(0,a.Z)((0,a.Z)({},e),{},{onDelete:i}),e._id)})):"You dont have any projects yet."}),s?(0,h.jsx)(c.$j,{}):null]})})),w=n(2982),b=n(4165),C=n(5861),k=n(885),y="ProjectPage_projectPageWrapper__DfPKp",L="ProjectPage_projectPage__gPfMH",Z="ProjectPage_projectHeader__Npbm9",U="ProjectPage_settings__O-GlV",R="ProjectPage_knowledgeBase__pVuHl",B="ProjectPage_knowledgeBaseList__HxEv1",D="ProjectPage_knowledgeBaseUploadForm__k82B2",S="ProjectPage_projectPageSection__BaH67",z="ProjectPage_sectionHeader__8KMsL",I="ProjectPage_sectionContent__WjGjw",T="ProjectPage_scriptCode__YCQon",W="ProjectPage_widgetStyleControls__-VlRI",A="ProjectPage_buttonsWrapper__uchQ+",E="ProjectPage_dragndropMessage__cuePI",H="ProjectPage_filesList__qlSQN",F=n(4193),M=(0,r.Pi)((function(){var e=(0,s.UO)().id,t=(0,i.useState)(),n=(0,k.Z)(t,2),r=n[0],l=n[1],d=(0,i.useState)(""),u=(0,k.Z)(d,2),j=u[0],p=u[1],x=(0,i.useState)(""),g=(0,k.Z)(x,2),f=g[0],m=g[1],_=(0,i.useState)(""),P=(0,k.Z)(_,2),N=P[0],M=P[1],$=(0,i.useState)("#ac84e1"),K=(0,k.Z)($,2),Q=K[0],V=K[1],q=(0,i.useState)("#ffffff"),O=(0,k.Z)(q,2),Y=O[0],G=O[1],J=(0,i.useState)("0"),X=(0,k.Z)(J,2),ee=X[0],te=X[1],ne=(0,i.useState)([]),re=(0,k.Z)(ne,2),se=re[0],ae=re[1],ce=(0,i.useState)(""),ie=(0,k.Z)(ce,2),oe=ie[0],le=ie[1],de=(0,i.useState)(""),ue=(0,k.Z)(de,2),je=ue[0],pe=ue[1],xe=v.Z.user,he=xe.getProjectById,ge=xe.saveProjectMetadata,fe=xe.ingestKnowledgeBase,ve=xe._id,me=v.Z.interface,_e=me.pushNotification,Pe=me.isLoading,Ne=me.setIsLoading,we=me.setCurrentProjectId,be=me.setModalType,Ce=he(e);(0,i.useEffect)((function(){Ce&&(l(Ce),p(Ce.projectName),m(Ce.projectURL),M(Ce.widgetURL))}),[Ce]);var ke=function(e){return function(t){switch(e){case"projectName":p(t.target.value);break;case"projectURL":m(t.target.value);break;case"widgetURL":M(t.target.value);break;case"widgetHeaderColor":V(t.target.value);break;case"widgetBgColor":G(t.target.value);break;case"widgetBorderRadius":te(t.target.value)}}},ye=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,F.f)(j)?(0,F.r)(f)?(0,F.r)(N)||(pe("widgetURLError"),0):(pe("projectURLError"),0):(pe("projectNameError"),0)){e.next=2;break}return e.abrupt("return");case 2:return pe(""),t=(0,a.Z)((0,a.Z)({},r),{},{projectName:j,projectURL:f,widgetURL:N}),Ne(!0),le("Updating project metadata"),e.next=8,ge(t);case 8:Ne(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(e){console.log("handleFilesAdd"),e.preventDefault(),e.stopPropagation();try{for(var t="drop"===e.type?e.dataTransfer.files:e.target.files,n=(0,w.Z)(se),r=0;r<t.length;r+=1)"text/plain"===t[r].type&&n.push(t[r]);ae(n)}catch(je){_e({type:"error",message:"Error while loading files from local drive. \n"+je.message})}},Ue=function(){var e=(0,C.Z)((0,b.Z)().mark((function e(){var t;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne(!0),le("Ingesting knowledge base"),t=new FormData,se.forEach((function(e){t.append("dataFiles",e)})),t.append("projectId",(null===r||void 0===r?void 0:r._id)||""),t.append("projectName",(null===r||void 0===r?void 0:r.projectName)||""),e.next=8,fe(t);case 8:ae([]),Ne(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){return'   <script\n    id="content_insight_widget"\n    data-userId="'.concat(ve,'"\n    data-projectId="').concat(e,'"\n    src="').concat(N,'"\n    data-completionsURL="https://content-insight-backend-c244a3d2147a.herokuapp.com/api/v1/getCompletion"\n   ><\/script>')};return r?(0,h.jsxs)("div",{className:y,children:[(0,h.jsxs)("div",{className:Z,children:[(0,h.jsxs)("h1",{children:["Project : ",r.projectName]})," ",(0,h.jsx)(o.rU,{to:"/cabinet/projects",style:{display:"block",width:"fit-content"},children:(0,h.jsx)(c.zx,{icon:"icon_arrow_left",text:"To projects list"})})]}),(0,h.jsxs)("div",{className:L,children:[(0,h.jsxs)("div",{className:U,children:[(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:z,children:[(0,h.jsx)("h2",{children:"Client script"}),(0,h.jsx)(c.zx,{disabled:Pe,text:"Copy",icon:"icon_copy",onClick:function(){window.navigator.clipboard.writeText(Re()).then((function(){return _e({type:"info",message:"Script copied to clipboard."})}))}})]}),(0,h.jsxs)("div",{className:I,children:[(0,h.jsx)("code",{className:T,children:Re()})," "]})]}),(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:z,children:[(0,h.jsx)("h2",{children:"Widget settings"}),(0,h.jsx)(c.zx,{disabled:Pe,text:"Discard",icon:"icon_close",onClick:function(){p((null===r||void 0===r?void 0:r.projectName)||""),m((null===r||void 0===r?void 0:r.projectURL)||""),M((null===r||void 0===r?void 0:r.widgetURL)||"")}}),(0,h.jsx)(c.zx,{disabled:Pe,text:"Save",icon:"icon_save",onClick:Le})]}),(0,h.jsx)("div",{className:I,children:(0,h.jsxs)("div",{className:W,children:[" ",(0,h.jsxs)("label",{children:["Header color",(0,h.jsx)("input",{type:"color",value:Q,onChange:ke("widgetHeaderColor")})]}),(0,h.jsxs)("label",{children:["Background color",(0,h.jsx)("input",{type:"color",value:Y,onChange:ke("widgetBgColor")})]}),(0,h.jsxs)("label",{children:["Border radius",(0,h.jsx)("input",{type:"range",min:0,max:30,value:ee,onChange:ke("widgetBorderRadius")})]})]})})]}),(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:z,children:[(0,h.jsx)("h2",{children:"Metadata"}),(0,h.jsx)(c.zx,{disabled:Pe,text:"Discard",icon:"icon_close",onClick:function(){p((null===r||void 0===r?void 0:r.projectName)||""),m((null===r||void 0===r?void 0:r.projectURL)||""),M((null===r||void 0===r?void 0:r.widgetURL)||"")}}),(0,h.jsx)(c.zx,{disabled:Pe,text:"Save",icon:"icon_save",onClick:ye})]}),(0,h.jsxs)("div",{className:I,children:[(0,h.jsxs)("label",{children:["Project name",(0,h.jsx)("span",{className:"hintText",children:"leters, numbers, dashes are allowed"}),(0,h.jsx)("input",{type:"text",className:"projectNameError"===je?"error":"",placeholder:"project-name",value:j,onChange:ke("projectName")})]}),(0,h.jsxs)("label",{children:["Project URL for the widget usage",(0,h.jsx)("input",{type:"url",className:"projectURLError"===je?"error":"",placeholder:"https://example.com",value:f,onChange:ke("projectURL")})]}),(0,h.jsxs)("label",{children:["Widget source URL",(0,h.jsx)("input",{type:"url",className:"widgetURLError"===je?"error":"",placeholder:"https://example.com",value:N,onChange:ke("widgetURL")})]})]})]})]}),(0,h.jsx)("div",{className:R,children:(0,h.jsxs)("div",{className:S,children:[(0,h.jsxs)("div",{className:z,children:[(0,h.jsx)("h2",{children:"Knowledge base"}),(0,h.jsxs)("div",{className:A,children:[(0,h.jsx)(c.zx,{disabled:Pe||!se.length,text:"Ingest",icon:"icon_edit",onClick:Ue}),(0,h.jsx)(c.zx,{disabled:Pe||!r.projectIngestedData.length,text:"Delete",icon:"icon_delete",onClick:function(){we((null===r||void 0===r?void 0:r._id)||""),le("Deleting knowledge base"),be("proejctKBDelete"),ae([])}})]})]}),(0,h.jsxs)("div",{className:I,children:[(0,h.jsxs)("details",{open:!!r.projectIngestedData.length,children:[(0,h.jsx)("summary",{children:"List of knowledgebase files"}),(0,h.jsx)("div",{className:B,children:(0,h.jsx)("ul",{className:H,children:r.projectIngestedData.map((function(e){var t=e.fileName,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsxs)("span",{children:[Number.parseFloat(n).toFixed(2)," kb"]})]},t)}))})})]}),(0,h.jsxs)("details",{open:!r.projectIngestedData.length,children:[(0,h.jsx)("summary",{children:"Ingest files"}),(0,h.jsxs)("div",{className:D,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[null!==se&&void 0!==se&&se.length?(0,h.jsx)("ul",{className:H,children:Array.from(se).map((function(e){var t=e.name,n=e.size;return(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:t}),(0,h.jsx)("span",{children:n})]},t+n)}))}):(0,h.jsx)("div",{className:E,children:"Drag'n'drop txt files or click the area for dialog window. Files are adding up to the ones that are already in knowledge base."}),(0,h.jsx)("input",{type:"file",accept:".txt",multiple:!0,onDragEnd:Ze,onChange:Ze})]})]})]})]})}),Pe?(0,h.jsx)(c.$j,{text:oe}):null]})]}):(0,h.jsx)("div",{children:"Project not found."})})),$={},K=(0,r.Pi)((function(){var e=(0,s.$B)().url;return(0,h.jsxs)("div",{className:$.projects,children:[" ",(0,h.jsxs)(s.rs,{children:[(0,h.jsx)(s.AW,{exact:!0,path:"".concat(e),component:N}),(0,h.jsx)(s.AW,{path:"".concat(e,"/:id"),component:M})]})]})}))},8796:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(184),s=function(){return(0,r.jsx)("div",{children:"Settings."})}},346:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(184),s=function(){return(0,r.jsx)("div",{children:"Stats."})}},6521:function(e,t,n){n.r(t),n.d(t,{Billing:function(){return p.default},Projects:function(){return j.default},Settings:function(){return x.default},Stats:function(){return h.default},default:function(){return u}});var r=n(2791),s=n(4880),a=n(7823),c=n(184),i=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,4194))})),o=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,2889))})),l=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,8796))})),d=(0,r.lazy)((function(){return Promise.resolve().then(n.bind(n,346))})),u=function(){var e=(0,s.$B)().url,t=(0,s.TH)().pathname;return(0,c.jsx)("div",{className:"page",children:(0,c.jsx)("div",{className:"pageContent",children:(0,c.jsx)(r.Suspense,{fallback:(0,c.jsx)(a.$j,{}),children:(0,c.jsxs)(s.rs,{children:[(0,c.jsx)(s.l_,{from:"/:url*(/+)",to:t.slice(0,-1)}),(0,c.jsx)(s.AW,{path:"".concat(e,"/projects"),component:i}),(0,c.jsx)(s.AW,{path:"".concat(e,"/stats"),component:d}),(0,c.jsx)(s.AW,{path:"".concat(e,"/billing"),component:o}),(0,c.jsx)(s.AW,{path:"".concat(e,"/settings"),component:l}),(0,c.jsx)(s.AW,{exact:!0,path:"".concat(e,"/"),component:function(){return(0,c.jsx)(s.l_,{to:"".concat(e,"/projects")})}})]})})})})},j=n(4194),p=n(2889),x=n(8796),h=n(346)}}]);
//# sourceMappingURL=Cabinet.9d577a87.chunk.js.map